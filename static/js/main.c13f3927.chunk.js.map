{"version":3,"sources":["index.js"],"names":["App","useState","power","setPower","bank","setBank","id","className","DrumMachine","handlePower","e","target","checked","handleBank","props","curr","setCurr","Display","DrumPads","handleDisplay","desc","CtrlPad","ToggleSwitch","name","handleChange","checky","tTxt","fTxt","type","disabled","dis","defaultChecked","onChange","htmlFor","datacustattrt","datacustattrf","sound","setSound","url","useEffect","a","fetch","response","json","data","soundBite","fetchData","catch","console","log","jsx","map","items","DrumPad","idKey","url1","url2","desc1","desc2","renderPad","act","setAct","document","addEventListener","handleKey","removeEventListener","keyCode","handleEvent","playSound","getElementById","dur","Math","round","duration","currentTime","play","Promise","resolve","setTimeout","onClick","src","style","animation","ReactDOM","render"],"mappings":"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","file":"static/js/main.c13f3927.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.scss';\n\nconst App=()=>{\n  //app on/off\n  const [power, setPower]=useState(true);\n  //app audio bank: true = 1, false = 2\n  const [bank,setBank]=useState(true);\n\n  const powerSwitch=e=>{\n    setPower(e.target.checked);\n  }\n\n  const bankSwitch=e=>{\n    setBank(e.target.checked);\n  }\n  return (\n    <div id=\"app\" className={bank?'app-bank1':'app-bank2'}>\n      <DrumMachine \n        handlePower={powerSwitch} \n        handleBank={bankSwitch}\n        power={power}\n        bank={bank}/>\n    </div>\n  )\n}\n\nconst DrumMachine=props=>{\n  //display text\n  const [curr, setCurr]=useState('');\n\n  const handleDisplay=desc=>{\n    setCurr(desc);\n  }\n\n  return (\n    <div id=\"drum-machine\">\n      <Display curr={curr}/>\n      <DrumPads handleDisplay={handleDisplay} power={props.power} bank={props.bank}/>\n      <CtrlPad handlePower={props.handlePower} handleBank={props.handleBank} power={props.power} bank={props.bank}/>\n    </div>\n  )\n}\n\nconst CtrlPad=props=>{\n  return (\n    <div id=\"ctrl-pad\">\n      <ToggleSwitch name=\"powerTog\"\n                    id=\"powerSwit\"\n                    handleChange={props.handlePower}\n                    checky={props.power}\n                    tTxt='ON'\n                    fTxt='OFF' />\n      <ToggleSwitch name=\"bankTog\"\n                    id=\"bankSwit\"\n                    handleChange={props.handleBank}\n                    checky={props.bank}\n                    tTxt='&nbsp;&nbsp;1'\n                    fTxt='2&nbsp;&nbsp;&nbsp;' />              \n    </div>\n    \n\n  )\n}\nconst ToggleSwitch =props=>{\n  return (\n  <div className='tog'>\n    <input \n      type=\"checkbox\"\n      className='tog-check'\n      name={props.name}\n      id={props.id}\n      disabled={props.dis}\n      defaultChecked={props.checky}\n      onChange={props.handleChange}\n    />\n    <label\n      className='tog-label'\n      htmlFor={props.id}>\n      <span className=\"tog-inner\"\n            datacustattrt={props.tTxt}\n            datacustattrf={props.fTxt}/>\n      <span className=\"tog-switch\" />\n    </label>\n  </div>\n  )\n}\n\nconst Display=props=>{\n  return (\n    <p id=\"display\">\n      {props.curr}\n    </p>\n  )\n}\n\nconst DrumPads=props=>{\n  //array of audio url and their descriptions\n  const [sound, setSound]=useState([]);\n  const [url]=useState('https://raw.githubusercontent.com/MatchaCrisp/DrumMachine/main/src/data/soundBite.json');\n\n\n  const renderPad=items=><DrumPad \n                            key ={items.idKey}\n                            idKey={items.idKey}\n                            id={items.id}\n                            url={props.bank?items.url1:items.url2}\n                            desc={props.bank?items.desc1:items.desc2} \n                            power={props.power} \n                            handleDisplay={props.handleDisplay}/>;\n  \n  //retrieve data on mount                          \n  useEffect(()=>{\n    if (!url) return;\n\n    const fetchData=async ()=>{\n      const response=await fetch(url);\n      const data=await response.json();\n      setSound(data.soundBite);\n      \n    }\n    fetchData().catch(console.log);\n\n  },[url]);\n\n  const jsx=sound.map(items=>renderPad(items));\n\n\n\n\n  return (\n    <div id=\"drum-pads\" className={props.bank?'app-pads1':'app-pads2'}>\n      {jsx}\n    </div>\n  )\n}\n\nconst DrumPad=props=>{\n  //active state: 0=inactive, any int=duration of clip in ms\n  const [act, setAct]=useState(0);\n\n  //add keydown listener on mount, remove on unmount\n  useEffect(()=>{\n    document.addEventListener('keydown',handleKey);\n    return ()=>{document.removeEventListener('keydown',handleKey)};\n  });\n\n  const handleKey=e=>{\n    if (!props.power) return;\n    if (e.keyCode===props.idKey) {\n      handleEvent();\n    }\n  }\n  const handleClick=()=>{\n    if (!props.power) return;\n    handleEvent();\n  }\n  const handleEvent=()=>{\n    //play sound and change display\n    props.handleDisplay(props.desc);\n    playSound();\n  }\n\n  //active effect achieved through async settimeout\n  const playSound=async()=>{\n    const sound=document.getElementById(props.id);\n    const dur=Math.round(sound.duration*1000);\n    sound.currentTime=0;\n    setAct(dur);\n    sound.play();\n    await new Promise(resolve=>setTimeout(resolve,dur));\n    setAct(0);\n\n\n  };\n\n    return (\n      <div className='drum-pad'\n           id={`${props.id}butt`} \n           onClick={handleClick}\n           >\n        <p className=\"pad-id\">{props.id}</p>\n        <audio className=\"clip\" id={props.id} src={props.url} />\n        <div className=\"animHelper\"\n             style={{animation:act?`activated ${act}ms`:'none'}} />\n      </div>\n    )\n}\nReactDOM.render(<App/>, document.getElementById('root'));"],"sourceRoot":""}